<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invitación de Boda</title>
    <!-- Tailwind CSS -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <!-- Font -->
    <link href="https://fonts.googleapis.com/css2?family=Source+Serif+Pro:wght@200;300;400;500;700&display=swap"
        rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
    <!-- Firebase Firestore -->
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-firestore-compat.js"></script>

    <style>
        body {
            font-family: 'Source Serif Pro', serif;
            font-style: normal;
            font-weight: 200;
            background-image: url(img/Fondo.png);
            background-repeat: repeat;
            background-size: cover;
            background-position: center;
        }

        h2 {
            font-family: 'Source Serif Pro', serif;
            font-weight: 300;
            font-size: 1.3em;
            color: #584E42;
        }

        h3 {
            font-family: 'Source Serif Pro', serif;
            font-weight: 400;
            font-size: 1.0em;
            color: #584E42;
        }

        p {
            font-family: 'Source Serif Pro', serif;
            font-weight: 300;
            font-size: 1.2rem;
            line-height: 1.6;
            color: #584E42;
        }

        .confirmar-asistencia {
            font-family: 'Source Serif Pro', serif;
            font-weight: 300;
            font-size: 1.2rem;
            line-height: 1.6;
            color: #584E42;
        }

        label {
            font-family: 'Source Serif Pro', serif;
            font-weight: 300;
            line-height: 1.6;
            color: #9B9387;
        }

        input {
            border-style: solid;
            border-color: #9B9387;
            border-width: 1px;
            border-radius: 6px;
        }

        select {
            font-family: 'Source Serif Pro', serif;
            font-weight: 300;
            line-height: 1.6;
            color: #9B9387;
            border-style: solid;
            border-color: #9B9387;
            border-width: 1px;
            border-radius: 6px;
        }

        option {
            font-family: 'Source Serif Pro', serif;
            font-weight: 300;
            line-height: 1.6;
            color: #9B9387;
            border-style: solid;
            border-color: #9B9387;
            border-width: 1px;
        }

        .contador-numbers {
            font-family: 'Source Serif Pro', serif;
            font-weight: 400;
            color: #000000;
        }

        .contador-text {
            font-family: 'Source Serif Pro', serif;
            font-weight: 300;
            color: #000000;
        }

        .border {
            border-color: #D9D9D9;
            border-style: solid;
            border-width: 2px;
        }

        #countdown {
            font-size: 1.5rem;
            color: #000000;
        }

        .ubicacion {
            border-color: #BCB6AE;
            border-style: solid;
            border-width: 1px;
            background-color: #BCB6AE;
            color: white;
            border-radius: 12px;
        }

        .enviar-form {
            border-color: #9B9487;
            border-style: solid;
            border-width: 1px;
            background-color: #9B9487;
            color: white;
            border-radius: 6px;
        }

        .form-card {
            background-color: #FAFAFA;
        }

        .hidden-opacity {
            opacity: 0;
            transform: translateY(50px);
            transition: all 0.8s ease-out;
        }

        .visible-opacity {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
</head>

<body class="sm:container sm:mx-auto flex flex-col items-center justify-center min-h-screen text-center">
    <!-- Encabezado -->
    <div id="banner" class="relative">
        <img src="img/foto_wedo_1.png" alt="">

        <img src="img/animacion_wedo_1.gif" alt="GIF decorativo"
            class="absolute top-12 left-1/2 transform -translate-x-1/2 w-96 h-auto">
    </div>

    <div class="bg-cover bg-center h-20 w-full flex flex-col justify-center items-center pt-4"
        style="background-image: url('img/fondo_1.png');">
        <img src="img/compaltil.png" alt="compartir" class="p-8 hidden-opacity" id="animated-paragraph">
    </div>

    <div class="bg-cover bg-center h-10 w-full flex flex-col justify-center items-center mt-0"
        style="background-image: url('img/fondo_1.png');">
        <img src="img/junto.png" alt="junto" class="px-6 pb-6 hidden-opacity" id="animated-paragraph">
    </div>

    <!-- Contador -->
    <div class="contador my-8">
        <h2>SOLO FALTAN</h2>
        <div id="countdown" class="flex justify-center gap-6 text-center">
            <div>
                <span id="months" class="block text-3xl contador-numbers">00</span>
                <span class="block text-sm contador-text">MESES</span>
            </div>
            <div>
                <span id="days" class="block text-3xl contador-numbers">00</span>
                <span class="block text-sm contador-text">DÍAS</span>
            </div>
            <div>
                <span id="hours" class="block text-3xl contador-numbers">00</span>
                <span class="block text-sm contador-text">HORAS</span>
            </div>
            <div>
                <span id="minutes" class="block text-3xl contador-numbers">00</span>
                <span class="block text-sm contador-text">MINUTOS</span>
            </div>
        </div>
    </div>

    <div>
        <img src="img/Foto_1.png" alt="">
    </div>

    <!-- Cuerpo principal -->
    <main class="flex flex-col items-center justify-center w-full max-w-md px-4 mt-8">
        <h2 id="animated-paragraph" class="text-md mb-5 hidden-opacity"><b>DETALLES DE LA BODA</b></h2>

        <div id="animated-paragraph" class="border py-2 px-8 hidden-opacity">
            <h3>CEREMONIA</h3>
        </div>

        <div id="animated-paragraph" class="my-6 hidden-opacity">
            <img src="img/Iglesia.png" alt="">
        </div>

        <div>
            <p id="animated-paragraph" class="hidden-opacity"><b>Parroquia San Antonio de Padua</b></p>
            <p id="animated-paragraph" class="hidden-opacity">Santuario Ntra. Sra. De Fátima</p>
            <p id="animated-paragraph" class="mb-3 hidden-opacity">Planes de Renderos</p>
            <p id="animated-paragraph" class="hidden-opacity"><b>2:30 PM</b></p>
        </div>

        <a href="https://waze.com/ul?ll=13.64341,-89.187634&navigate=yes" target="_blank" rel="noopener noreferrer"
            class="mt-4 mb-8 ubicacion">
            <button class="px-4 py-2">Ubicación</button>
        </a>

        <div id="heading" class="border py-2 px-8 hidden-opacity">
            <h3>RECEPCIÓN</h3>
        </div>

        <div id="animated-paragraph" class="py-8 hidden-opacity">
            <img src="img/Quadra.png" alt="Quadra Logo">
        </div>

        <div>
            <p id="animated-paragraph" class="hidden-opacity">LA QUADRA</p>
            <p id="animated-paragraph" class="mb-3 hidden-opacity">Planes de Renderos</p>
            <p id="animated-paragraph" class="hidden-opacity"><b>4:30 PM</b></p>
        </div>

        <a href="https://waze.com/ul?ll=13.652894,-89.197719&navigate=yes" target="_blank" rel="noopener noreferrer"
            class="mt-4 mb-8 ubicacion">
            <button class="px-4 py-2">Ubicación</button>
        </a>
    </main>

    <div>
        <img src="img/grupo_dressCode.png" alt="Dress Code">
    </div>

    <div>
        <img src="img/Foto_2.png" alt="">
    </div>

    <div class="bg-cover bg-center h-24 w-full flex flex-col justify-center items-center pt-4"
        style="background-image: url('img/fondo_sobre.png');">
        <img src="img/grupo_mail.png" alt="compartir" id="animated-paragraph" class="p-4 hidden-opacity">
    </div>

    <div class="bg-cover bg-center h-20 w-full flex flex-col justify-center items-center pb-4"
        style="background-image: url('img/fondo_sobre.png');">
        <img src="img/grupo_agradecemos.png" alt="compartir" id="animated-paragraph" class="p-4 hidden-opacity">
    </div>

    <!-- Formulario -->
    <div class="flex flex-col items-center justify-center w-full max-w-md px-6 mt-8">
        <div class="w-full shadow-lg p-6 mb-6 form-card">
            <div class="flex flex-col items-center justify-center mb-3">
                <img src="img/TeEsperamos_1.png" alt="te esperamos" class="max-h-10">
            </div>
            <div class="flex flex-col items-center justify-center mb-3">
                <img src="img/RSVP_1.png" alt="rsvp" class="max-h-3">
            </div>
            <h2 class="confirmar-asistencia">CONFIRMA TU ASISTENCIA</h2>

            <div class="my-4">
                <form id="rsvp-form" class="flex flex-col gap-4 p-2 max-w-md mx-auto">
                    <label class="block text-left">
                        <span>Nombre</span>
                        <input type="text" id="name" required class="mt-1 block w-full shadow-sm focus:ring">
                    </label>

                    <label class="block text-left">
                        <span>Acompañante/s</span>
                        <input type="text" id="guest" class="mt-1 block w-full shadow-sm">
                    </label>

                    <label class="block text-left">
                        <span>Confirmar asistencia</span>
                        <select id="confirmation" required class="mt-1 py-2 block w-full shadow-sm">
                            <option value="">Selecciona una opción</option>
                            <option value="si">Sí</option>
                            <option value="no">No</option>
                        </select>
                    </label>

                    <button type="submit" class="enviar-form shadow-md mt-4">Enviar</button>
                </form>
            </div>

            <div class="flex flex-col items-center justify-center mb-3">
                <img src="img/agradecemos_tu_comprension.png" alt="ninos" class="max-h-6">
            </div>
        </div>
    </div>

    <div class="p-4 my-10">
        <img src="img/Miles_Millones1.png" alt="">
    </div>

    <script>
        // Fecha de la boda
        const weddingDate = new Date("2025-03-15T14:30:00");

        function updateCountdown() {
            const now = new Date();
            const timeLeft = weddingDate - now;

            if (timeLeft < 0) {
                document.getElementById("countdown").innerHTML = "¡Hoy es el gran día!";
                clearInterval(countdownInterval);
                return;
            }

            // Cálculo de meses
            let months = weddingDate.getMonth() - now.getMonth() + (12 * (weddingDate.getFullYear() - now.getFullYear()));
            if (now.getDate() > weddingDate.getDate()) {
                months -= 1; // Si estamos más allá del día, restamos un mes.
            }

            // Cálculo de días
            const tempDate = new Date(now.getFullYear(), now.getMonth() + months, weddingDate.getDate());
            const days = Math.floor((tempDate - now) / (1000 * 60 * 60 * 24));

            // Cálculo de horas y minutos
            const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));

            // Actualiza el HTML
            document.getElementById("months").innerText = months.toString().padStart(2, '0');
            document.getElementById("days").innerText = days.toString().padStart(2, '0');
            document.getElementById("hours").innerText = hours.toString().padStart(2, '0');
            document.getElementById("minutes").innerText = minutes.toString().padStart(2, '0');
        }

        // Actualizar cada segundo
        const countdownInterval = setInterval(updateCountdown, 1000);
        updateCountdown();
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Configuración de Firebase
            const firebaseConfig = {
                apiKey: "AIzaSyDkGd25yZgqbLdJeWzSaz9VNqrXD50nRpE",
                authDomain: "bodawedo.firebaseapp.com",
                projectId: "bodawedo",
                storageBucket: "bodawedo.firebasestorage.app",
                messagingSenderId: "467420226700",
                appId: "1:467420226700:web:66c4467bea375b5b8a07a9",
                measurementId: "G-CZ7642L3RW"
            };

            // Inicializar Firebase
            const app = firebase.initializeApp(firebaseConfig);

            // Inicializar Firestore
            const db = firebase.firestore();

            // Referencia al formulario
            const form = document.getElementById('rsvp-form');

            // Manejar el evento de envío del formulario
            form.addEventListener('submit', async (e) => {
                e.preventDefault();
                console.log('El formulario fue enviado.');

                const name = document.getElementById('name').value.trim();
                const guest = document.getElementById('guest').value.trim();
                const confirmation = document.getElementById('confirmation').value;

                if (!name || !confirmation) {
                    alert('Por favor, completa los campos obligatorios.');
                    return;
                }

                try {
                    console.log('Intentando guardar los datos en Firestore...');
                    await db.collection('rsvp').add({
                        name,
                        guest: guest || null,
                        confirmation,
                        timestamp: firebase.firestore.FieldValue.serverTimestamp()
                    });
                    console.log('Datos guardados exitosamente.');
                    alert('Gracias por confirmar tu asistencia.');
                    form.reset();
                } catch (error) {
                    console.error('Error al guardar los datos:', error);
                    alert('Hubo un error al enviar los datos. Inténtalo de nuevo.');
                }
            });
        });
    </script>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach((entry) => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add("visible-opacity");
                    }
                });
            });

            // Elementos que queremos observar
            const elements = document.querySelectorAll(".hidden-opacity");
            elements.forEach((el) => observer.observe(el));
        });

    </script>
</body>

</html>